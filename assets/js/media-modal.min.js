window.imagify.drawMeAChart=function(i){i.each(function(){var i=parseInt(jQuery(this).closest(".imagify-chart").next(".imagify-chart-value").text(),10);new window.imagify.Chart(this,{type:"doughnut",data:{datasets:[{data:[i,100-i],backgroundColor:["#00B3D3","#D8D8D8"],borderColor:"#fff",borderWidth:1}]},options:{legend:{display:!1},events:[],animation:{easing:"easeOutBounce"},tooltips:{enabled:!1},responsive:!1}})})},function(s,a,d){d.imagify.modal={working:[],init:function(){var i=s(a);s(d).on("canvasprinted.imagify",this.updateChart).trigger("canvasprinted.imagify"),s(".imagify-datas-details").hide(),i.on("click",".imagify-datas-more-action a",this.toggleSlide),i.on("click",".button-imagify-restore, .button-imagify-optimize, .button-imagify-manual-reoptimize, .button-imagify-optimize-missing-sizes, .button-imagify-generate-webp, .button-imagify-delete-webp",this.processOptimization),i.on("imagifybeat-send",this.addToImagifybeat),i.on("imagifybeat-tick",this.processImagifybeat),(i=s(".imagify-data-actions-container .button-imagify-processing")).length&&(i.closest(".imagify-data-actions-container").each(function(){var i=s(this),a=d.imagify.modal.sanitizeId(i.data("id")),i=d.imagify.modal.sanitizeContext(i.data("context"));d.imagify.modal.lockItem(i,a)}),d.imagify.beat.interval(15))},updateChart:function(i,a){a=s(a=a||".imagify-consumption-chart");d.imagify.drawMeAChart(a),a.closest(".imagify-datas-list").siblings(".imagify-datas-details").hide()},processOptimization:function(i){var a,t=s(this),e=t.parents(".imagify-data-actions-container"),n=d.imagify.modal.sanitizeId(e.data("id")),o=d.imagify.modal.sanitizeContext(e.data("context"));i.preventDefault(),d.imagify.modal.isItemLocked(o,n)||(d.imagify.modal.lockItem(o,n),i=t.attr("href"),a=d.imagify.template("imagify-button-processing"),e.html(a({label:t.data("processing-label")})),s.get(i.replace("admin-post.php","admin-ajax.php")).done(function(i){i.data&&i.data.html?d.imagify.modal.displayProcessResult(o,n,i.data.html):d.imagify.beat.interval(15)}))},addToImagifybeat:function(i,e){var a=s(".imagify-data-actions-container");a.length&&(e[d.imagifyModal.imagifybeatID]={},a.each(function(){var i=s(this),a=d.imagify.modal.sanitizeId(i.data("id")),i=d.imagify.modal.sanitizeContext(i.data("context")),t=d.imagify.modal.isItemLocked(i,a)?1:0;e[d.imagifyModal.imagifybeatID][i]=e[d.imagifyModal.imagifybeatID][i]||{},e[d.imagifyModal.imagifybeatID][i]["_"+a]=t}))},processImagifybeat:function(i,a){void 0!==a[d.imagifyModal.imagifybeatID]&&s.each(a[d.imagifyModal.imagifybeatID],function(i,a){var t,i=s.trim(i).match(/^(.+)_(\d+)$/);i&&(t=d.imagify.modal.sanitizeId(i[2]),i=d.imagify.modal.sanitizeContext(i[1]),d.imagify.modal.displayProcessResult(i,t,a))})},displayProcessResult:function(i,a,t){var e=d.imagify.modal.getContainers(i,a);e.html(t),d.imagify.modal.unlockItem(i,a),d.imagify.modal.working.length||(d.imagify.modal.openSlide(e),d.imagify.beat.resetInterval())},openSlide:function(i){i.each(function(){var i=s(this),a=i.find(".imagify-datas-more-action a").data("close");i.find(".imagify-datas-more-action a").addClass("is-open").find(".the-text").text(a),i.find(".imagify-datas-details").show().addClass("is-open")})},toggleSlide:function(i){var a=s(this);i.preventDefault(),a.hasClass("is-open")?(s(a.attr("href")).slideUp(300).removeClass("is-open"),a.removeClass("is-open").find(".the-text").text(a.data("open"))):(s(a.attr("href")).slideDown(300).addClass("is-open"),a.addClass("is-open").find(".the-text").text(a.data("close")))},getContainers:function(i,a){return s('.imagify-data-actions-container[data-id="'+a+'"][data-context="'+i+'"]')},sanitizeId:function(i){return parseInt(i,10)},sanitizeContext:function(i){return(i=i.replace("/[^a-z0-9_-]/gi","").toLowerCase())||"wp"},lockItem:function(i,a){this.isItemLocked(i,a)||this.working.push(i+"_"+a)},unlockItem:function(i,a){i=_.indexOf(this.working,i+"_"+a);-1<i&&this.working.splice(i,1)},isItemLocked:function(i,a){return-1<_.indexOf(this.working,i+"_"+a)}},d.imagify.modal.init()}(jQuery,document,window);
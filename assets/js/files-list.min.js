window.imagify.drawMeAChart=function(i){i.each(function(){var i=parseInt(jQuery(this).closest(".imagify-chart").next(".imagify-chart-value").text(),10);new window.imagify.Chart(this,{type:"doughnut",data:{datasets:[{data:[i,100-i],backgroundColor:["#00B3D3","#D8D8D8"],borderColor:"#fff",borderWidth:1}]},options:{legend:{display:!1},events:[],animation:{easing:"easeOutBounce"},tooltips:{enabled:!1},responsive:!1}})})},function(c,t,l){l.imagify.filesList={working:[],init:function(){var i=c(t);c(l).on("canvasprinted.imagify",this.updateChart).trigger("canvasprinted.imagify"),this.insertBulkActionTags(),c("#doaction, #doaction2").on("click.imagify",this.processBulkAction),i.on("click.imagify",".button-imagify-optimize, .button-imagify-manual-reoptimize, .button-imagify-generate-webp, .button-imagify-delete-webp, .button-imagify-restore, .button-imagify-refresh-status",this.processOptimization),i.on("imagifybeat-send",this.addToImagifybeat),i.on("imagifybeat-tick",this.processImagifybeat),(i=c(".wp-list-table.imagify-files .button-imagify-processing")).length&&(i.closest("tr").find('.check-column [name="bulk_select[]"]').each(function(){var i=l.imagify.filesList.sanitizeId(this.value);l.imagify.filesList.lockItem(l.imagifyFiles.context,i)}),l.imagify.beat.interval(15))},updateChart:function(i,t){t=c(t=t||".imagify-consumption-chart");l.imagify.drawMeAChart(t),t.closest(".imagify-datas-list").siblings(".imagify-datas-details").hide()},insertBulkActionTags:function(){var i='<option value="imagify-bulk-optimize">'+l.imagifyFiles.labels.bulkActionsOptimize+"</option>";(l.imagifyFiles.backupOption||c(".file-has-backup").length)&&(i+='<option value="imagify-bulk-restore">'+l.imagifyFiles.labels.bulkActionsRestore+"</option>"),c('.bulkactions select[name="action"] option:first-child, .bulkactions select[name="action2"] option:first-child').after(i)},processBulkAction:function(i){var t=c(this).prev("select").val();"imagify-bulk-optimize"!==t&&"imagify-bulk-restore"!==t&&"imagify-bulk-refresh-status"!==t||(i.preventDefault(),i=t.replace("imagify-bulk-",""),c('input[name="bulk_select[]"]:checked').closest("tr").find(".button-imagify-"+i).each(function(i,t){setTimeout(function(){c(t).trigger("click.imagify")},500*i)}))},processOptimization:function(i){var t,e=c(this),a=e.closest("tr"),n=a.find('.check-column [type="checkbox"]'),s=imagify.filesList.sanitizeId(n.val()),o=l.imagifyFiles.context;i.preventDefault(),imagify.filesList.isItemLocked(o,s)||(imagify.filesList.lockItem(o,s),n=e.attr("href"),i=l.imagify.template("imagify-button-processing"),(t=e.closest(".column-actions, .column-status")).html(i({label:e.data("processing-label")})),c.get(n.replace("admin-post.php","admin-ajax.php")).done(function(i){i.success?i.data&&i.data.columns?l.imagify.filesList.displayProcessResult(o,s,i.data.columns):l.imagify.beat.interval(15):(i.data&&i.data.row?a.html('<td class="colspanchange" colspan="'+a.children().length+'">'+i.data.row+"</td>"):t.html(i.data),a.find('.check-column [type="checkbox"]').prop("checked",!1),imagify.filesList.unlockItem(o,s))}))},addToImagifybeat:function(i,a){var t=c('.wp-list-table.imagify-files .check-column [name="bulk_select[]"]');t.length&&(a[l.imagifyFiles.imagifybeatID]={},t.each(function(){var i=l.imagify.filesList.sanitizeId(this.value),t=l.imagifyFiles.context,e=l.imagify.filesList.isItemLocked(t,i)?1:0;a[l.imagifyFiles.imagifybeatID][t]=a[l.imagifyFiles.imagifybeatID][t]||{},a[l.imagifyFiles.imagifybeatID][t]["_"+i]=e}))},processImagifybeat:function(i,t){void 0!==t[l.imagifyFiles.imagifybeatID]&&c.each(t[l.imagifyFiles.imagifybeatID],function(i,t){var e,i=c.trim(i).match(/^(.+)_(\d+)$/);i&&(e=l.imagify.filesList.sanitizeId(i[2]),(i=l.imagify.filesList.sanitizeContext(i[1]))===l.imagifyFiles.context)&&l.imagify.filesList.displayProcessResult(i,e,t)})},displayProcessResult:function(i,t,e){var a=l.imagify.filesList.getContainers(t);c.each(e,function(i,t){a.children(".column-"+i).html(t)}),a.find('.check-column [type="checkbox"]').prop("checked",!1),l.imagify.filesList.unlockItem(i,t),l.imagify.filesList.working.length||l.imagify.beat.resetInterval()},getContainers:function(i){return c('.wp-list-table.imagify-files .check-column [name="bulk_select[]"][value="'+i+'"]').closest("tr")},sanitizeId:function(i){return parseInt(i,10)},sanitizeContext:function(i){return(i=i.replace("/[^a-z0-9_-]/gi","").toLowerCase())||"wp"},lockItem:function(i,t){this.isItemLocked(i,t)||this.working.push(i+"_"+t)},unlockItem:function(i,t){i=_.indexOf(this.working,i+"_"+t);-1<i&&this.working.splice(i,1)},isItemLocked:function(i,t){return-1<_.indexOf(this.working,i+"_"+t)}},l.imagify.filesList.init()}(jQuery,document,window),function(i){for(var n=0,t=["ms","moz","webkit","o"],e=0;e<t.length&&!i.requestAnimationFrame;++e)i.requestAnimationFrame=i[t[e]+"RequestAnimationFrame"],i.cancelAnimationFrame=i[t[e]+"CancelAnimationFrame"]||i[t[e]+"CancelRequestAnimationFrame"];i.requestAnimationFrame||(i.requestAnimationFrame=function(i){var t=(new Date).getTime(),e=Math.max(0,16-(t-n)),a=setTimeout(function(){i(t+e)},e);return n=t+e,a}),i.cancelAnimationFrame||(i.cancelAnimationFrame=function(i){clearTimeout(i)})}(window),function(l,i,m){var t,f=l("#imagify-files-list-form").find("[data-lazy-src]");function r(){i.cancelAnimationFrame(t),t=i.requestAnimationFrame(e)}function e(){var s=l(i),o=s.scrollTop(),c=s.outerHeight();l.each(f,function(){var i=l(this),t=i.offset().top,e=t+i.outerHeight(),a=o-150,n=o+c+150;(f=f.not(i)).length||s.off("scroll resize orientationchange",r),a<=e&&t<=n&&(a=i.attr("data-lazy-src"),m!==a&&a&&i.attr("src",a).removeAttr("data-lazy-src"),i.next("noscript").remove())})}f.length&&(l(i).on("scroll resize orientationchange",r),e())}(jQuery,(document,window));
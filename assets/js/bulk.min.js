window.imagify=window.imagify||{},function(t,s){var l=t.propHooks.checked;t.propHooks.checked={set:function(i,e,a){a=s===l?i[a]=e:l(i,e,a);return t(i).trigger("change.imagify"),a}},t.fn.imagifyHide=function(i,e){return i&&0<i?this.hide(i,function(){t(this).addClass("hidden").css("display",""),s!==e&&e()}):(this.addClass("hidden"),s!==e&&e()),this.attr("aria-hidden","true")},t.fn.imagifyShow=function(i,e){return s!==e&&e(),i&&0<i?this.show(i,function(){t(this).removeClass("hidden").css("display","")}):this.removeClass("hidden"),this.attr("aria-hidden","false")}}(jQuery),function(y,s,p,l){p.imagify.bulk={charts:{overview:{canvas:!1,donut:!1,data:{labels:[imagifyBulk.labels.overviewChartLabels.unoptimized,imagifyBulk.labels.overviewChartLabels.optimized,imagifyBulk.labels.overviewChartLabels.error],datasets:[{data:[],backgroundColor:["#10121A","#46B1CE","#C51162"],borderWidth:0}]}},files:{donuts:{}},share:{canvas:!1,donut:!1}},folderTypesQueue:[],status:{},displayedWaitMessage:!1,hasMultipleRows:!0,imagifyAction:"",processIsStopped:!1,processingMedia:[],globalGain:0,globalOriginalSize:0,globalOptimizedSize:0,folderTypesData:{},defaultThumb:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhBAMAAAClyt9cAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABtQTFRFR3BMjo6Oh4eHqqqq4uLigoKC+fn5fn5+fHx8SBBv5wAAAAF0Uk5TAEDm2GYAAABWSURBVCjPY2BgEBIEAyERBhgQUoKAIAc0EXXjEDQRRTNzBzRdBokhaGoM2CQc0NQwJJegqWFgM3VAUSNsbGwugCKiqBQUpIAiAgICoyIDKyIIB0JAEQA54jRBweNV0AAAAABJRU5ErkJggg==",init:function(){var i=y(s);this.drawOverviewChart(),this.hasMultipleRows=1<y('.imagify-bulk-table [name="group[]"]').length,y(".imagify-selector-button").on("click.imagify",this.openSelectorFromButton),y(".imagify-selector-list input").on("change.imagify init.imagify",this.syncSelectorFromRadio).filter(":checked").trigger("init.imagify"),i.on("keypress.imagify click.imagify",this.closeSelectors),y('.imagify-bulk-table [name="group[]"]').on("change.imagify init.imagify",this.toggleOptimizationButton).trigger("init.imagify"),y(".imagify-show-table-details").on("click.imagify open.imagify close.imagify",this.toggleOptimizationDetails),y("#imagify-bulk-action").on("click.imagify",this.maybeLaunchAllProcesses),y(".imagify-share-networks a").on("click.imagify",this.share),y(p).on("processQueue.imagify",this.processQueue).on("optimizeFiles.imagify",this.optimizeFiles).on("queueEmpty.imagify",this.queueEmpty),imagifyBulk.ajaxActions.getStats&&y('.imagify-bulk-table [data-group-id="library"][data-context="wp"]').length&&(imagifyBulk.imagifybeatIDs.stats=!1),imagifyBulk.imagifybeatIDs.stats&&i.on("imagifybeat-send",this.addStatsImagifybeat).on("imagifybeat-tick",this.processStatsImagifybeat),i.on("imagifybeat-send",this.addQueueImagifybeat).on("imagifybeat-tick",this.processQueueImagifybeat),i.on("imagifybeat-send",this.addRequirementsImagifybeat).on("imagifybeat-tick",this.processRequirementsImagifybeat)},getAjaxUrl:function(i,e){var a=ajaxurl+p.imagify.concat+"_wpnonce="+imagifyBulk.ajaxNonce+"&action="+imagifyBulk.ajaxActions[i];return e&&e.context&&(a+="&context="+e.context),"getMediaIds"!==i&&"bulkProcess"!==i||(a+="&imagify_action="+p.imagify.bulk.imagifyAction),a},getFolderTypes:function(){return y.isEmptyObject(p.imagify.bulk.folderTypesData)&&y(".imagify-row-folder-type").each(function(){var i=y(this),i={groupID:i.data("group-id"),context:i.data("context")};p.imagify.bulk.folderTypesData[i.groupID+"|"+i.context]=i}),p.imagify.bulk.folderTypesData},getConfirmMessage:function(){return imagifyBulk.labels.processing},closeLevelSelector:function(i,e){i&&i.length&&(l!==e&&0<e?p.setTimeout(function(){p.imagify.bulk.closeLevelSelector(i)},e):i.attr("aria-hidden","true"))},stopProcess:function(i,e){this.processIsStopped=!0,p.imagify.bulk.status[e.groupID]={isError:!0,id:i},y(p).trigger("queueEmpty.imagify")},hasBlockingError:function(i){return i=l!==i&&i,imagifyBulk.curlMissing?(i&&p.imagify.bulk.displayError({html:imagifyBulk.labels.curlMissing}),!0):imagifyBulk.editorMissing?(i&&p.imagify.bulk.displayError({html:imagifyBulk.labels.editorMissing}),!0):imagifyBulk.extHttpBlocked?(i&&p.imagify.bulk.displayError({html:imagifyBulk.labels.extHttpBlocked}),!0):imagifyBulk.apiDown?(i&&p.imagify.bulk.displayError({html:imagifyBulk.labels.apiDown}),!0):imagifyBulk.keyIsValid?!!imagifyBulk.isOverQuota&&(i&&p.imagify.bulk.displayError({title:imagifyBulk.labels.overQuotaTitle,html:y("#tmpl-imagify-overquota-alert").html(),type:"info",customClass:"imagify-swal-has-subtitle imagify-swal-error-header",showConfirmButton:!1}),!0):(i&&p.imagify.bulk.displayError({title:imagifyBulk.labels.invalidAPIKeyTitle,type:"info"}),!0)},displayError:function(i,e,a){var t={title:"",html:"",type:"error",customClass:"",width:620,padding:0,showCloseButton:!0,showConfirmButton:!0};(a=y.isPlainObject(i)?y.extend({},t,i):y.extend({},t,{title:i||"",html:e||""},a=a||{})).title=a.title||imagifyBulk.labels.error,a.customClass+=" imagify-sweet-alert",swal(a).catch(swal.noop)},displayErrorInRow:function(i,e){var a,t=(a=(i=y(i())).find(".imagify-cell-status ~ td")).length;return e=e||"",a.remove(),i.find(".imagify-cell-status").after('<td colspan="'+t+'">'+e+"</td>"),i},displayFolderRow:function(i,e){var a,t,s;return"resting"===i?(e.next(".imagify-row-waiting, .imagify-row-working").remove(),void e.imagifyShow()):(a=e.next(".imagify-row-waiting, .imagify-row-working"),s="waiting"===i?(t="#d2d3d6",imagifyBulk.labels.waitingOtimizationsText):(t="#40b1d0",imagifyBulk.labels.imagesOptimizedText.replace("%s","<span>0</span>")),a.length?(a.hasClass("imagify-row-"+i)||(a.attr("class","imagify-row-"+i),a.find(".imagify-cell-checkbox svg").attr("fill",t),a.children(".imagify-cell-count-optimized").html(s)),e.imagifyHide(),void a.imagifyShow()):(a=e.clone().attr({class:"imagify-row-"+i,"aria-hidden":"false"}),i=p.imagify.template("imagify-spinner"),a.children(".imagify-cell-checkbox").html(i()).find("svg").attr("fill",t),a.children(".imagify-cell-title").html('<span class="imagify-cell-label">'+a.children(".imagify-cell-title").text()+"</span>"),a.children(".imagify-cell-count-optimized").html(s),a.children(".imagify-cell-count-errors, .imagify-cell-optimized-size, .imagify-cell-original-size, .imagify-cell-level").text(""),void e.imagifyHide().after(a)))},displayShareBox:function(){var i,e,a,t,s=imagifyBulk.labels.textToShare;if(!this.globalGain||this.folderTypesQueue.length)return this.globalGain=0,this.globalOriginalSize=0,void(this.globalOptimizedSize=0);i=(100-this.globalOptimizedSize/this.globalOriginalSize*100).toFixed(2),e=p.imagify.humanSize(this.globalGain,1),a=p.imagify.humanSize(this.globalOriginalSize,1),s=(s=s.replace("%1$s",e)).replace("%2$s",a),s=encodeURIComponent(s),(t=y(".imagify-row-complete")).find(".imagify-ac-rt-total-gain").html(e),t.find(".imagify-ac-rt-total-original").html(a),t.find(".imagify-ac-chart").attr("data-percent",i),t.find(".imagify-sn-twitter").attr("href",imagifyBulk.labels.twitterShareURL+"&amp;text="+s),this.drawShareChart(),t.addClass("done").imagifyShow(),y("html, body").animate({scrollTop:t.offset().top},200),this.globalGain=0,this.globalOriginalSize=0,this.globalOptimizedSize=0},updateStats:function(i){var e;i&&y.isPlainObject(i)&&(p.imagify.bulk.charts.overview.donut.data&&(e=p.imagify.bulk.charts.overview.donut.data.datasets[0].data,i.unoptimized_attachments===e[0]&&i.optimized_attachments===e[1]&&i.errors_attachments===e[2])||(i.unconsumed_quota=i.unconsumed_quota.toFixed(1),y(".imagify-meteo-icon").html(i.quota_icon),y(".imagify-unconsumed-percent").html(i.unconsumed_quota+"%"),y(".imagify-unconsumed-bar").css("width",i.unconsumed_quota+"%").parent().attr("class",i.quota_class),y("#imagify-overview-chart-percent").html(i.optimized_attachments_percent+"<span>%</span>"),y(".imagify-total-percent").html(i.optimized_attachments_percent+"%"),p.imagify.bulk.drawOverviewChart([i.unoptimized_attachments,i.optimized_attachments,i.errors_attachments]),y("#imagify-total-optimized-attachments").html(i.already_optimized_attachments),y("#imagify-original-bar").find(".imagify-barnb").html(i.original_human),y("#imagify-optimized-bar").css("width",100-i.optimized_percent+"%").find(".imagify-barnb").html(i.optimized_human),y("#imagify-total-optimized-attachments-pct").html(i.optimized_percent+"%")))},openSelectorFromButton:function(i){var e=y("#"+y(this).attr("aria-controls"));i.stopPropagation(),y(".imagify-selector-list").not(e).attr("aria-hidden","true"),e.attr("aria-hidden","false").find(":checked").trigger("focus.imagify")},syncSelectorFromRadio:function(){var i=y(this).closest(".imagify-selector-choice");i.addClass("imagify-selector-current-value").attr("aria-current","true").siblings(".imagify-selector-choice").removeClass("imagify-selector-current-value").attr("aria-current","false"),i.closest(".imagify-selector-list").siblings(".imagify-selector-button").find(".imagify-selector-current-value-info").html(i.find("label").html())},closeSelectors:function(i){"keypress"===i.type&&27!==i.keyCode&&13!==i.keyCode||p.imagify.bulk.closeLevelSelector(y('.imagify-selector-list[aria-hidden="false"]'))},toggleOptimizationButton:function(){p.imagify.bulk.hasMultipleRows||this.checked?y('.imagify-bulk-table [name="group[]"]:checked').length?y("#imagify-bulk-action").prop("disabled",!1):y("#imagify-bulk-action").prop("disabled",!0):y(this).prop("checked",!0)},toggleOptimizationDetails:function(i){var e=y(this),a=e.closest(".imagify-bulk-table").find(".imagify-bulk-table-details"),i="open"===i.type||"close"!==i.type&&a.hasClass("hidden");i?(e.html(e.data("label-hide")+'<span class="dashicons dashicons-no-alt"></span>'),a.imagifyShow()):(e.html(e.data("label-show")+'<span class="dashicons dashicons-menu"></span>'),a.imagifyHide())},maybeLaunchAllProcesses:function(){var e;y(this).prop("disabled")||y('.imagify-bulk-table [name="group[]"]:checked').length&&(p.imagify.bulk.hasBlockingError(!0)||((e=y("#tmpl-imagify-bulk-infos")).length?swal({title:imagifyBulk.labels.bulkInfoTitle,html:e.html(),type:"",customClass:"imagify-sweet-alert imagify-swal-has-subtitle imagify-before-bulk-infos",showCancelButton:!0,padding:0,width:554,confirmButtonText:imagifyBulk.labels.confirmBulk,cancelButtonText:imagifySwal.labels.cancelButtonText,reverseButtons:!0}).then(function(){var i=y('.imagify-bulk-table [name="group[]"]:checked').first().closest(".imagify-row-folder-type");y.get(p.imagify.bulk.getAjaxUrl("bulkInfoSeen",{context:i.data("context")})),e.remove(),p.imagify.bulk.launchAllProcesses()}).catch(swal.noop):p.imagify.bulk.launchAllProcesses()))},launchAllProcesses:function(){var i=y(p),e=y("#imagify-bulk-action"),s=!0;e.prop("disabled",!0).find(".dashicons").addClass("rotate"),i.on("beforeunload",this.getConfirmMessage),y(".imagify-row-complete").imagifyHide(200,function(){y(this).removeClass("done")}),y(".imagify-show-table-details").trigger("close.imagify"),this.folderTypesQueue=[],this.status={},this.displayedWaitMessage=!1,this.processIsStopped=!1,this.imagifyAction="optimize",this.globalGain=0,this.globalOriginalSize=0,this.globalOptimizedSize=0,y('.imagify-bulk-table [name="group[]"]:checked').each(function(){var i=y(this).closest(".imagify-row-folder-type"),e=i.data("group-id"),a=i.data("context"),t=i.find('.imagify-cell-level [name="level['+e+']"]:checked').val();if(p.imagify.bulk.folderTypesQueue.push({groupID:e,context:a,level:l===t?-1:parseInt(t,10)}),p.imagify.bulk.status[e]={isError:!1,id:"waiting"},s)return!(s=!1);p.imagify.bulk.displayFolderRow("waiting",i)}),p.imagify.beat.interval(15),p.imagify.beat.disableSuspend(),i.trigger("processQueue.imagify")},processQueue:function(){var a,t;p.imagify.bulk.processIsStopped||(p.imagify.bulk.folderTypesQueue.length?(p.imagify.bulk.displayedWaitMessage||(swal({title:imagifyBulk.labels.waitTitle,html:imagifyBulk.labels.waitText,showConfirmButton:!1,padding:0,imageUrl:imagifyBulk.waitImageUrl,customClass:"imagify-sweet-alert"}).catch(swal.noop),p.imagify.bulk.displayedWaitMessage=!0),t=p.imagify.bulk.folderTypesQueue.shift(),a=y("#cb-select-"+t.groupID).closest(".imagify-row-folder-type"),p.imagify.bulk.status[t.groupID].id="fetching",p.imagify.bulk.displayFolderRow("working",a),y.get(p.imagify.bulk.getAjaxUrl("getMediaIds",t)).done(function(i){var e;swal.close(),p.imagify.bulk.processIsStopped||(e=i.data&&i.data.message?i.data.message:imagifyBulk.ajaxErrorText,i.success&&i.data&&(y.isPlainObject(i.data)||y.isArray(i.data))?y.isEmptyObject(i.data)?(p.imagify.bulk.status[t.groupID].id="no-images",p.imagify.bulk.hasMultipleRows&&y("#cb-select-"+t.groupID).prop("checked",!1),p.imagify.bulk.folderTypesQueue.length?(p.imagify.bulk.displayFolderRow("resting",a),y(p).trigger("processQueue.imagify")):y(p).trigger("queueEmpty.imagify")):y(p).trigger("optimizeFiles.imagify",[t,i.data]):p.imagify.bulk.stopProcess(e,t))}).fail(function(){p.imagify.bulk.stopProcess("get-unoptimized-images",t)})):y(p).trigger("queueEmpty.imagify"))},optimizeFiles:function(i,t,e){var a,s,l,o,r,n,g,m,u,f,d,c={groupID:t.groupID,mediaID:0,thumbnail:"",filename:"",status:"",icon:"",label:"",thumbnailsCount:"",originalSizeHuman:"",newSizeHuman:"",percentHuman:"",overallSavingHuman:""};p.imagify.bulk.processIsStopped||(a=y("#cb-select-"+t.groupID).closest(".imagify-row-folder-type"),s=a.next(".imagify-row-working"),o=s.find(".imagify-cell-count-errors span"),f=parseInt(o.text(),10),n=(r=a.closest(".imagify-bulk-table")).find(".imagify-row-progress"),g=n.find(".bar"),"optimize"===p.imagify.bulk.imagifyAction&&(l=s.find(".imagify-cell-count-optimized span"),u=parseInt(l.text(),10)),p.imagify.bulk.status[t.groupID].id="optimizing",r.find(".imagify-bulk-table-details thead").html(y("#tmpl-imagify-file-header-"+t.groupID).html()),m=r.find(".imagify-bulk-table-details tbody").text(""),g.css("width","0%").find(".percent").text("0%"),n.slideDown().attr("aria-hidden","false"),(d=new p.imagify.Optimizer({groupID:t.groupID,context:t.context,level:t.level,bufferSize:imagifyBulk.bufferSizes[t.context],ajaxUrl:p.imagify.bulk.getAjaxUrl("bulkProcess",t),files:e,defaultThumb:p.imagify.bulk.defaultThumb,doneEvent:"mediaProcessed.imagify"})).before(function(i){var e;p.imagify.bulk.processIsStopped||(e=p.imagify.template("imagify-file-row-"+t.groupID),p.imagify.bulk.processingMedia.push({context:t.context,mediaID:i.mediaID}),m.prepend(e(y.extend({},c,i,{status:"compressing",icon:"admin-generic rotate",label:imagifyBulk.labels.optimizing}))))}),d.each(function(a){var i,e;if(!p.imagify.bulk.processIsStopped){if(i=p.imagify.template("imagify-file-row-"+t.groupID),e=y("#"+t.groupID+"-"+a.mediaID),y.each(p.imagify.bulk.processingMedia,function(i,e){return e.context!==t.context||e.mediaID!==a.mediaID||(p.imagify.bulk.processingMedia.splice(i,1),!1)}),g.css("width",a.progress+"%").find(".percent").html(a.progress+"%"),a.success)return"already-optimized"!==a.status?(e.replaceWith(i(y.extend({},c,a,{status:"complete",icon:"yes",label:imagifyBulk.labels.complete}))),p.imagify.bulk.drawFileChart(y("#"+t.groupID+"-"+a.mediaID).find(".imagify-cell-percentage canvas"))):e.replaceWith(p.imagify.bulk.displayErrorInRow(i(y.extend({},c,a,{status:"complete",icon:"yes",label:imagifyBulk.labels.alreadyOptimized})),a.error)),void("optimize"===p.imagify.bulk.imagifyAction&&(u+=1,l.text(u)));e.replaceWith(p.imagify.bulk.displayErrorInRow(i(y.extend({},c,a,{status:"error",icon:"dismiss",label:imagifyBulk.labels.error})),a.error||a)),o.length?(f+=1,o.text(f)):(f=1,o=s.find(".imagify-cell-count-errors").html(imagifyBulk.labels.imagesErrorText.replace("%s","<span>1</span>")).find("span")),"over-quota"===a.status&&(d.stopProcess(),p.imagify.bulk.stopProcess(a.status,t))}}),d.done(function(i){p.imagify.bulk.hasMultipleRows&&y("#cb-select-"+t.groupID).prop("checked",!1),i.globalOriginalSize&&(p.imagify.bulk.globalGain+=parseInt(i.globalGain,10),p.imagify.bulk.globalOriginalSize+=parseInt(i.globalOriginalSize,10),p.imagify.bulk.globalOptimizedSize+=parseInt(i.globalOptimizedSize,10)),p.imagify.bulk.processIsStopped||(p.imagify.beat.resetInterval(),p.imagify.beat.enableSuspend(),y.isEmptyObject(p.imagify.bulk.status)||p.imagify.bulk.status[t.groupID].isError||(p.imagify.bulk.status[t.groupID].id="done"),a.addClass("updating"),y.get(p.imagify.bulk.getAjaxUrl("getFolderData",t)).done(function(i){p.imagify.bulk.processIsStopped||(i.success&&y.each(i.data,function(i,e){a.children(".imagify-cell-"+i).html(e)}),p.imagify.bulk.displayFolderRow("resting",a))}).always(function(){p.imagify.bulk.processIsStopped||(a.removeClass("updating"),p.imagify.bulk.folderTypesQueue.length?y(p).trigger("processQueue.imagify"):y(p).trigger("queueEmpty.imagify"))}))}),d.run())},queueEmpty:function(){var i=y(".imagify-bulk-table"),e={},a=!1,t=!0,s="";p.imagify.beat.resetInterval(),p.imagify.beat.enableSuspend(),p.imagify.bulk.displayShareBox(),p.imagify.bulk.folderTypesQueue=[],imagifyBulk.imagifybeatIDs.stats||y.get(p.imagify.bulk.getAjaxUrl("getStats"),{types:p.imagify.bulk.getFolderTypes()}).done(function(i){i.success&&p.imagify.bulk.updateStats(i.data)}),y.isEmptyObject(p.imagify.bulk.status)||(y.each(p.imagify.bulk.status,function(i,e){return e.isError?(a=e.id,t=!1):"no-images"!==e.id?t=!1:void 0}),a?("invalid-api-key"===a?e={title:imagifyBulk.labels.invalidAPIKeyTitle,type:"info"}:"over-quota"===a?e={title:imagifyBulk.labels.overQuotaTitle,html:y("#tmpl-imagify-overquota-alert").html(),type:"info",customClass:"imagify-swal-has-subtitle imagify-swal-error-header",showConfirmButton:!1}:"get-unoptimized-images"!==a&&"consumed-all-data"!==a||(e={title:imagifyBulk.labels.getUnoptimizedImagesErrorTitle,html:imagifyBulk.labels.getUnoptimizedImagesErrorText,type:"info"}),p.imagify.bulk.displayError(e)):t&&(s=imagifyBulk.labels.nothingToDoText.hasOwnProperty(p.imagify.bulk.imagifyAction)?imagifyBulk.labels.nothingToDoText[p.imagify.bulk.imagifyAction]:imagifyBulk.labels.nothingToDoText.optimize,p.imagify.bulk.displayError({title:imagifyBulk.labels.nothingToDoTitle,html:s,type:"info"}))),p.imagify.bulk.status={},y(p).off("beforeunload",p.imagify.bulk.getConfirmMessage),p.imagify.bulk.displayFolderRow("resting",i.find(".imagify-row-folder-type").not(".updating")),i.find(".imagify-row-progress").slideUp().attr("aria-hidden","true").find(".bar").removeAttr("style").find(".percent").text("0%"),(y('.imagify-bulk-table [name="group[]"]:checked').length?y("#imagify-bulk-action").prop("disabled",!1):y("#imagify-bulk-action")).find(".dashicons").removeClass("rotate")},share:function(i){var e;i.preventDefault(),i=p.innerWidth?(e=(p.innerWidth-700)/2,(p.innerHeight-290)/2):(e=(s.body.clientWidth-700)/2,(s.body.clientHeight-290)/2),p.open(this.href,"","status=no, scrollbars=no, menubar=no, top="+i+", left="+e+", width=700, height=290")},addStatsImagifybeat:function(i,e){e[imagifyBulk.imagifybeatIDs.stats]=Object.keys(p.imagify.bulk.getFolderTypes())},processStatsImagifybeat:function(i,e){void 0!==e[imagifyBulk.imagifybeatIDs.stats]&&p.imagify.bulk.updateStats(e[imagifyBulk.imagifybeatIDs.stats])},addQueueImagifybeat:function(i,e){p.imagify.bulk.processingMedia.length&&(e[imagifyBulk.imagifybeatIDs.queue]=p.imagify.bulk.processingMedia)},processQueueImagifybeat:function(i,e){void 0!==e[imagifyBulk.imagifybeatIDs.queue]&&y.each(e[imagifyBulk.imagifybeatIDs.queue],function(i,e){y(p).trigger("mediaProcessed.imagify",[e])})},addRequirementsImagifybeat:function(i,e){e[imagifyBulk.imagifybeatIDs.requirements]=1},processRequirementsImagifybeat:function(i,e){void 0!==e[imagifyBulk.imagifybeatIDs.requirements]&&(e=e[imagifyBulk.imagifybeatIDs.requirements],imagifyBulk.curlMissing=e.curl_missing,imagifyBulk.editorMissing=e.editor_missing,imagifyBulk.extHttpBlocked=e.external_http_blocked,imagifyBulk.apiDown=e.api_down,imagifyBulk.keyIsValid=e.key_is_valid,imagifyBulk.isOverQuota=e.is_over_quota)},drawOverviewChart:function(i){var a,t;(this.charts.overview.canvas||(this.charts.overview.canvas=s.getElementById("imagify-overview-chart"),this.charts.overview.canvas))&&(i=i&&y.isArray(i)?i:[],this.charts.overview.donut?i.length&&(0===i.reduce(function(i,e){return i+e},0)&&(i[0]=1),this.charts.overview.donut.data.datasets[0].data=i,this.charts.overview.donut.update()):(this.charts.overview.data.datasets[0].data=[parseInt(this.charts.overview.canvas.getAttribute("data-unoptimized"),10),parseInt(this.charts.overview.canvas.getAttribute("data-optimized"),10),parseInt(this.charts.overview.canvas.getAttribute("data-errors"),10)],a=y.extend({},this.charts.overview.data),i.length&&(a.datasets[0].data=i),0===a.datasets[0].data.reduce(function(i,e){return i+e},0)&&(a.datasets[0].data[0]=1),this.charts.overview.donut=new p.imagify.Chart(this.charts.overview.canvas,{type:"doughnut",data:a,options:{legend:{display:!1},events:[],animation:{easing:"easeOutBounce"},tooltips:{displayColors:!1,callbacks:{label:function(i,e){return e.datasets[i.datasetIndex].data[i.index]}}},responsive:!1,cutoutPercentage:85}}),t='<ul class="imagify-doughnut-legend">',y.each(a.labels,function(i,e){t+='<li><span style="background-color:'+a.datasets[0].backgroundColor[i]+'"></span>'+e+"</li>"}),t+="</ul>",s.getElementById("imagify-overview-chart-legend").innerHTML=t))},drawFileChart:function(i){var e=this.charts.files.donuts;i.each(function(){var i=parseInt(y(this).closest(".imagify-chart").next(".imagipercent").text().replace("%",""),10);if(l!==e[this.id])return e[this.id].data.datasets[0].data[0]=i,e[this.id].data.datasets[0].data[1]=100-i,void e[this.id].update();e[this.id]=new p.imagify.Chart(this,{type:"doughnut",data:{datasets:[{data:[i,100-i],backgroundColor:["#00B3D3","#D8D8D8"],borderColor:"#fff",borderWidth:1}]},options:{legend:{display:!1},events:[],animation:{easing:"easeOutBounce"},tooltips:{enabled:!1},responsive:!1}})}),this.charts.files.donuts=e},drawShareChart:function(){var i;if(this.charts.share.canvas||(this.charts.share.canvas=s.getElementById("imagify-ac-chart"),this.charts.share.canvas)){if(i=parseInt(y(this.charts.share.canvas).closest(".imagify-ac-chart").attr("data-percent"),10),this.charts.share.donut)return this.charts.share.donut.data.datasets[0].data[0]=i,this.charts.share.donut.data.datasets[0].data[1]=100-i,void this.charts.share.donut.update();this.charts.share.donut=new p.imagify.Chart(this.charts.share.canvas,{type:"doughnut",data:{datasets:[{data:[i,100-i],backgroundColor:["#40B1D0","#FFFFFF"],borderWidth:0}]},options:{legend:{display:!1},events:[],animation:{easing:"easeOutBounce"},tooltips:{enabled:!1},responsive:!1,cutoutPercentage:70}})}}},p.imagify.bulk.init()}(jQuery,document,window);